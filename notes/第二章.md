# 第二章

进制计算

十进制->二进制    二进制->十进制

基数：每个数码所用到的不同符号的个数，r进制基数为r

**BCD（Binary-Coded Decimal**

- 8421码：数字表示权重

- 余3码：8421码 + （0011

- 2421码：从左到右权重为2421

三种编码

原码：

- 机器字长n+1位，带符号整数的原码表示范围：$-(2^n-1)\le x\le 2^n-1$

- 真值0有两种形式：+0和-0，$[+0]_原=0,0000000;[-0]_原=1,0000000$

注：真值是人使用的数

反码：

- 对正数而言，其反码等于原码

- 对负数来说，将原码的数值位取反得到反码，符号位不变

补码：

- 对正数而言，其补码=反码=原码

- 对负数来说，将反码末位+1得到补码

- 机器字长n+1位，补码表示范围：$-2^n\le x\le 2^n-1$

- 只有一个0，1,0000000是$-2^7$

- 优势：符号位参与运算，利于计算机实现

移码：

- 将补码的符号位取反就是移码

- 能直观看出大小，方便用硬件电路对比大小

<mark>原码<——>补码の快速转换</mark>：从右向左找到第一个1，把它左边的 全部 数据位 取反即可

计算机对<mark>带符号数</mark>的计算建立在补码基础上，将减法化为加法，把补码相加扔掉溢出位，得到结果的<mark>补码</mark>

    +18——>00010010

    -19——>11101101

+

————————————

        -1——11111111

---

补码减法运算：减法化加法

$$
A-B=A+(-B)<-->[A]_补-[B]_补=[A]_补+[-B]_补
$$

思路很好理解，算A-B就是算A+(-B)，用加法规则：补码相加

奇技淫巧之正负补码间的转换：全部位按位取反，末位+1（硬件实现的基础理论

**Q&A：**

1. 无符号数怎么计算？
   
   - 无符号数也有原、反、补码一说，需要注意的是减法，把减数<mark>所有位</mark>取反，末位+1，然后与被减数相加得到结果的补码（注意没有负数表示，即补码肯定等于原码）。

2. 

**引入定点小数**

整数可以看成小数点在末尾如 $1D=0,000 0001.$

而定点小数的小数点则是位于符号位后，一般记为$-0.25D=1.100 0000$

定点小数的原、反、补码变换规则、加减法和整数一样

<img title="" src="file:///C:/Users/jia'le/AppData/Roaming/marktext/images/2024-07-17-18-06-09-image.png" alt="" data-align="center" width="589">

~~看看这哥们能看几页书：51页    14:40~~

**奇偶校验**（只能检验奇数个bit错误

往数据开头添加一个校验bit位

奇校验：

- 使得整体数据中1的个数为奇数个

- 发送前全部位 异或 后得到结果为1，若检验时异或结果为0则发生错误

偶校验：

- 使数据中1的个数为偶数个

- 发送前全部位 异或 后得到结果为0，若检验时异或结果为 1 则发生错误

---

运算的硬件电路实现~~

补码加减的实现：

<img title="" src="file:///C:/Users/jia'le/AppData/Roaming/marktext/images/2024-07-18-16-40-13-image.png" alt="" data-align="center" width="431">

**溢出判断的三种方法**

方法1：采用一位符号位

$$
A_S、B_S、S_S分别表示被加数、加数、和的符号位
$$

- 记$V=A_SB_S\overline{S_S}+\overline{A_SB_S}S_S$，若V=0则无溢出，若V=1则有溢出

方法2：进位表示法

<img title="" src="file:///C:/Users/jia'le/AppData/Roaming/marktext/images/2024-07-18-18-00-32-image.png" alt="" data-align="left" width="259">

- 符号位的进位为$C_S$，最高数值位的进位$C_1$

- |     | $C_S$ | $C_1$ |
  |:---:|:-----:|:-----:|
  | 上溢  | 0     | 1     |
  | 下溢  | 1     | 0     |

方法3：双符号位（存储时只存1位，运算时复制一位

- 正数符号为00，负数符号为11

- 两数相加，记$V=S_{S1}\oplus S_{S2}$，V=0表示无溢出，V=1表示有溢出

- $00+00=01$表示上溢，$11+11=10$表示下溢 

---

**标志位**

OF：溢出标志位，将结果最高位、次高位产生的进位异或，为1则溢出。（only有符号数

SF：最高位的本位之和（包括进位），为0表示正数（only signed number

ZF：运算结果，为0表示结果为零

CF：进/借位标志，最高位产生的进位与sub异或，为1表示发生进位或借位（only unsigned number

Q&A：

1. sub位是啥？
   
   - 控制信号；做减法时要把减数变负数，全部按位取反后加一，1就是sub。而对做加法来说，sub就是0。
